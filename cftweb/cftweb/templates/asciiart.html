{% extends "base.jinja" %}
{% block page_css %}
  <style>
    .col-container {
      width: 100%;
    }
    .scrollable {
      overflow-x: scroll;
    }
    .resizable {
      resize: horizontal;
      float: left;
    }
    .ascii-art {
      /* float: right; */
	    white-space: pre;
	    font-family: monospace;
    }
    span.Vgene {
      background-color: #b2d28e
    }
    span.N {
      background-color: #8fbbd9
    }
    span.Dgene {
      background-color: #ecaf80
    }
    span.Jgene {
      background-color: #aba7d4
    }
    span.mutation {
      color: red
    }
    span.CDR3 {
      font-weight: bold
    }
  </style>
{% endblock %}

  <!-- TODO Need to add this crap somewhere still probably... -->
  <!--<head>-->
    <!--<meta http-equiv="X-UA-Compatible" content="IE=edge">-->
    <!--[> Custom CSS <]-->
    <!--<link href="{{url_for('static', filename='css/2-col-portfolio.css')}}" rel="stylesheet">-->
  <!--</head>-->


{% block content %}

<table class="table table-striped">
  <tbody>
    <tr>
      <th>Patient ID</th>
      <td>{{ cluster.pid }}</td>
    </tr>
    <tr>
      <th>Timepoint</th>
      <td>{{ cluster.timepoint }}</td>
    </tr>
    <tr>
      <th>Seed</th>
      <td>{{ cluster.seed }}</td>
    </tr>
    <tr>
      <th>V-gene</th>
      <td>{{ cluster.v_gene }}</td>
    </tr>
    <tr>
      <th>D-gene</th>
      <td>{{ cluster.d_gene }}</td>
    </tr>
    <tr>
      <th>J-gene</th>
      <td>{{ cluster.j_gene }}</td>
    </tr>
    <tr>
      <th>Sequences</th>
      <td>{{ cluster.nseq }}</td>
    </tr>
    <tr>
      <th>Download</th>
      <td><a href='{{ url_for('cluster_fasta', id=cluster.id) }}'>Fasta</a></td>
    </tr>
  </tbody>
</table>

<div class="col-container">
  <div class="scrollable resizable" style="width: 35%;">
    <div class="ascii-art">
      {{asciiart|safe}}
    </div>
  </div>
  <div class="scrollable resizable" style="width: 10%;">
    <div>&nbsp;</div><div>&nbsp;</div>
    {% for rec in records %}
    <div class="ascii-art"> &gt; {{rec.id}} </div>
    {% endfor %}
    <div>&nbsp;</div>
  </div>
  <div class="scrollable" style="width: auto;">
    <div>&nbsp;</div><div>&nbsp;</div>
    {% for rec in records %}
    <div class="ascii-art"> {{rec.seq | annotate(cluster) | safe}} </div>
    {% endfor %}
    <div>&nbsp;</div>
  </div>
</div>

{% endblock %}

